<!DOCTYPE html>
<!-- 

          Alan's Page Counters - 22Feb23          
 
          
see: https://medium.com/@mignunez/how-to-count-the-number-of-visits-on-your-website-with-html-css-javascript-and-the-count-api-2f99b42b5990

create new counter: https://api.countapi.xyz/create?namespace=alanesqCNC&enable_reset=1

reset counter: https://api.countapi.xyz/set/alanesqCalculators/a4531941-8c3d-469c-8259-437ca09d4a73?value=0

read counter: https://api.countapi.xyz/get/alanesqCalculators/a4531941-8c3d-469c-8259-437ca09d4a73     

calculators:  {"namespace":"alanesqCalculators","key":"a4531941-8c3d-469c-8259-437ca09d4a73","value":0}
Schickard: {"namespace":"alanesqSchickard","key":"c2cd0dd0-f132-40f6-8c92-9f4d75485a1f","value":0}
CNC: {"namespace":"alanesqCNC","key":"5078ea3c-e4e8-4f74-91ac-49c680a21e72","value":0}

in HEAD add:  <script async src="https://api.countapi.xyz/hit/alanesqCalculators/a4531941-8c3d-469c-8259-437ca09d4a73?callback=websiteVisits"></script>  

add this javascript:          // visit counter (using countapi.xyz)
                                function websiteVisits(response) {
                                    document.querySelector("#visits").textContent = response.value;
                                }   

display with:  <span>Page visitors: <span id="visits"></span></span>  
          

-->
 
 
 <html style="direction: ltr;">
  <head>
    <title>Alan's Page Counters</title>
    <meta name="description" content="Alan's Page Counters">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="SHORTCUT ICON" href="logo.ico">
    <link rel="stylesheet" href="/main/css/style.css">  
  </head>
  
  <body>

    <div style="text-align: center;">

      <!-- Banner at top of page -->
      <div class="header-footer" style="height: 10vw;">
          <img class="headerImg" src="/main/calculators/cat.gif" alt="Page logo 1" style="left: 12px;">
          <h1>Alan's Page Counters</h1>
          <img class="headerImg" src="/main/calculators/cat.gif" alt="Page logo 2" style="transform: scaleX(-1); right: 12px;">
      </div>       
      
      <br>
      <div id="results"></div>
      <input type="button" value="Reset Counters" onclick="resetCounters()"> 
      <br><br>

    <!-- If it is December display Festivus banner -->
        <div id='festivusDiv'></div>
        <script type="text/javascript" src="../js/festivus.js"></script>    

    <!-- show banner if 'alanesq.com/banner.gif' exists -->
        <div id='bannerDiv'></div>
        <script type="text/javascript" src="../js/banner.js"></script>    <!-- check if banner.gif exists and if it does insert html in to div above -->          
      
    <!-- Footer at bottom of page -->  
      <div class="header-footer" style="height: 4vw;">
          <input class="button" type="button" value="Return to previous page" onclick="history.back()"> 
          <input class="button" type="button" value="Alan's Homepage" onclick='window.location.href = "index.htm"'> 
          <span class="button">Contact: <a href="mailto:alanesq@disroot.org">alanesq@disroot.org</a></span>
      </div>

      
    <script> 
    
        // get JSON data
          var getJSON = function(url, callback) {
              var xhr = new XMLHttpRequest();
              xhr.open('GET', url, true);
              xhr.responseType = 'json';
              xhr.onload = function() {
                var status = xhr.status;
                if (status === 200) {
                  callback(null, xhr.response);
                } else {
                  callback(status, xhr.response);
                }
              };
              xhr.send();
          };
          
        // GET request
          function httpGet(theUrl)
          {
              var xmlHttp = new XMLHttpRequest();
              xmlHttp.open( "GET", theUrl, false ); // false for synchronous request
              xmlHttp.send( null );
              return xmlHttp.responseText;
          }        

        // Calculators
          getJSON('https://api.countapi.xyz/get/alanesqCalculators/a4531941-8c3d-469c-8259-437ca09d4a73',
          function(err, data) {
            if (err !== null) {
              console.log('Something went wrong: ' + err);
            } else {
              console.log('Your query count: ' + data.value);
              document.getElementById("results").innerHTML += "Calculators: " + data.value + "<br><br>";
            }
          });

        // Schickard
          getJSON('https://api.countapi.xyz/get/alanesqSchickard/c2cd0dd0-f132-40f6-8c92-9f4d75485a1f',
          function(err, data) {
            if (err !== null) {
              console.log('Something went wrong: ' + err);
            } else {
              console.log('Your query count: ' + data.value);
              document.getElementById("results").innerHTML += "Schickard: " + data.value + "<br><br>";
            }
          });
          
        // CNC
          getJSON('https://api.countapi.xyz/get/alanesqCNC/5078ea3c-e4e8-4f74-91ac-49c680a21e72',
          function(err, data) {
            if (err !== null) {
              console.log('Something went wrong: ' + err);
            } else {
              console.log('Your query count: ' + data.value);
              document.getElementById("results").innerHTML += "CNC Router: " + data.value + "<br><br>";
            }
          });          
          
        // reset counters
          function resetCounters() {
            httpGet("https://api.countapi.xyz/set/alanesqCalculators/a4531941-8c3d-469c-8259-437ca09d4a73?value=0");
            httpGet("https://api.countapi.xyz/set/alanesqSchickard/c2cd0dd0-f132-40f6-8c92-9f4d75485a1f?value=0");
            httpGet("https://api.countapi.xyz/set/alanesqCNC/5078ea3c-e4e8-4f74-91ac-49c680a21e72?value=0");
            location.reload();
          }
    
    </script>        
        
        
  </body>
</html>
